/*! common.js created_at:2018-04-24 */

!function(d){d.fn.extend({center:function(i){return i=d.extend({fixed:!0},i),this.each(function(){var e=(d(window).height()-d(this).outerHeight())/2,t=(d(window).width()-d(this).outerWidth())/2;i.fixed?d(this).css({position:"fixed",margin:0,top:e,left:t}):d(this).css({position:"absolute",margin:0,top:e+d(document).scrollTop(),left:t+d(document).scrollLeft()})})},dragable:function(e){e=d.extend({},e);var a=this,s={x:0,y:0};d(this).css({position:"absolute"}),this.moveDiv=function(e){var t=window.event||e,i=d(a).offset(),n=i.top+(t.clientY-s.y),o=i.left+(t.clientX-s.x);d(a).css({top:n,left:o}),s.x=t.clientX,s.y=t.clientY};var i=e.handle?d(e.handle):d(this);i.mousedown(function(e){var t=window.event||e;s.x=t.clientX,s.y=t.clientY,d(document).bind("mousemove",a.moveDiv),i.css({cursor:"move"})}),d(document).mouseup(function(){d(document).unbind("mousemove",a.moveDiv),i.css({cursor:"default"})})},insertContent:function(e,t){var i=d(this)[0];if(document.selection){this.focus();var n=document.selection.createRange();n.text=e,n.moveStart("character",-a);var o=n.text.length;if(2==arguments.length){var a=i.value.length;n.moveEnd("character",o+t),t<=0?n.moveStart("character",o-2*t-e.length):n.moveStart("character",o-t-e.length),n.select()}}else if(i.selectionStart||"0"==i.selectionStart){var s=i.selectionStart,r=i.selectionEnd,c=i.scrollTop;i.value=i.value.substring(0,s)+e+i.value.substring(r,i.value.length),this.focus(),i.selectionStart=s+e.length,i.selectionEnd=s+e.length,i.scrollTop=c,2==arguments.length&&(i.setSelectionRange(s-t,i.selectionEnd+t),this.focus())}else this.value+=e,this.focus()}})}(jQuery),function(s){s.fn.extend({confirm:function(e){var o=s.extend({event:"click",text:"确定要删除吗?",btnYes:"确定",btnNo:"取消"},e),a=s('<div id="dsxui-confirm-box" class="dsxui-confirm-box"><dl><dt class="txt">'+o.text+'</dt><dd><span class="btn btn-yes" tabindex="1">'+o.btnYes+'</span><span class="btn btn-no" tabindex="1">'+o.btnNo+"</span></dd></dl></div>");s(this).on(o.event,function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0;var t=this,i=s(this).offset(),n=parseInt(i.top+s(this).outerHeight())+7;s(document.body).append(a),a.css({top:n+"px",display:"none",position:"absolute"}).fadeIn("fast"),i.left>s(document).width()/2?a.css({right:s(document).width()-(i.left+s(this).outerWidth())+"px"}):a.css({left:i.left+"px"}),a.find(".btn-yes").one("click",function(){a.remove(),o.onConfirm&&o.onConfirm(a,t)}),a.find(".btn-no").click(function(){a.remove(),o.onCancel&&o.onCancel(a,t)}),a.click(function(e){var t=window.event||e;t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}),s(document).on("click",function(){a.remove()})})}})}(jQuery),function(v){v.fn.marquee=function(i){i=v.extend({speed:30,step:1,direction:"left",pause:0,container:"ul",items:"li"},i||{});var e,t=v.inArray(i.direction,["right","down"]);-1<t&&(i.direction=["left","up"][t],i.step=-i.step);var n=v(this),o=n.innerWidth(),a=n.innerHeight(),s=n.find(i.container),r=s.find(i.items),c=r.size(),d=r.width(),l=r.height(),u=d*c,h=l*c;function f(){if("left"===i.direction){var e=n.scrollLeft();i.step<0?n.scrollLeft((e<=0?u:e)+i.step):n.scrollLeft((u<=e?0:e)+i.step),e%d==0&&p()}else{var t=n.scrollTop();i.step<0?n.scrollTop((t<=0?h:t)+i.step):n.scrollTop((h<=t?0:t)+i.step),t%l==0&&p()}}function p(){if(0<i.pause){var e=i.step;i.step=0,setTimeout(function(){i.step=e},i.pause)}}n.height(l),("left"===i.direction&&o<u||"up"===i.direction&&a<h)&&("left"===i.direction?(s.width(2*c*d),i.step<0&&n.scrollLeft(u)):(s.height(2*c*l),i.step<0&&n.scrollTop(h)),s.append(r.clone()),e=setInterval(f,i.speed),n.hover(function(){clearInterval(e)},function(){e=setInterval(f,i.speed)}))}}(jQuery);var DSXValidate={IsURL:function(e){return/^http:\/\/[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\:+!]*([^<>])*$/.test(e)},IsChineseName:function(e){return/^[\u4e00-\u9fa5]{2,12}$/.test(e)},IsUserName:function(e){return/^[a-zA-Z0-9_\u4e00-\u9fa5]{2,20}$/.test(e)},IsEmail:function(e){return/^[-._A-Za-z0-9]+@([A-Za-z0-9]+\.)+[A-Za-z]{2,3}$/.test(e)},IsMobile:function(e){return/^1[3|4|5|7|8]\d{9}$/.test(e)},IsPassword:function(e){return/^.{6,20}$/.test(e)},IsIdCardNo:function(e){var n=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2,1],o=[1,0,10,9,8,7,6,5,4,3,2];if(this.isTrueValidateCodeBy18IdCard=function(e){var t=0;"x"===e[17].toLowerCase()&&(e[17]=10);for(var i=0;i<17;i++)t+=n[i]*e[i];return valCodePosition=t%11,e[17]==o[valCodePosition]},this.isValidityBrithBy18IdCard=function(e){var t=e.substring(6,10),i=e.substring(10,12),n=e.substring(12,14),o=new Date(t,parseFloat(i)-1,parseFloat(n));return o.getFullYear()==parseFloat(t)&&o.getMonth()==parseFloat(i)-1&&o.getDate()==parseFloat(n)},this.isValidityBrithBy15IdCard=function(e){var t=e.substring(6,8),i=e.substring(8,10),n=e.substring(10,12),o=new Date(t,parseFloat(i)-1,parseFloat(n));return o.getYear()==parseFloat(t)&&o.getMonth()==parseFloat(i)-1&&o.getDate()==parseFloat(n)},15===(e=(e=e.replace(/ /g,"")).replace(/(^\s*)|(\s*$)/g,"")).length)return this.isValidityBrithBy15IdCard(e);if(18==e.length){var t=e.split("");return!(!this.isValidityBrithBy18IdCard(e)||!this.isTrueValidateCodeBy18IdCard(t))}return!1}},DSXUtil={mb_cutstr:function(e,t,i){var n=0,o="";t-=(i=i?"":"...").length;for(var a=0;a<e.length;a++){if(t<(n+=e.charCodeAt(a)<0||255<e.charCodeAt(a)?"utf-8"===charset?3:2:1)){o+=i;break}o+=e.substr(a,1)}return o},paramToJSON:function(e){if(e){var n={},t=e.split("&");return $.each(t,function(e,t){var i=t.split("=");n[i[0]]=i[1]?i[1]:""}),n}},randomString:function(e){e=e||32;var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=t.length,o="";for(i=0;i<e;i++)o+=t.charAt(Math.floor(Math.random()*n));return o},getQueryString:function(e){var t=location.search.match(new RegExp("[?&]"+e+"=([^&]*)(&?)","i"));return t?t[1]:t},changeURLArg:function(url,arg,arg_val){var pattern=arg+"=([^&]*)",replaceText=arg+"="+arg_val;if(url.match(pattern)){var tmp="/("+arg+"=)([^&]*)/gi";return tmp=url.replace(eval(tmp),replaceText),tmp}return url.match("[?]")?url+"&"+replaceText:url+"?"+replaceText},setCookie:function(e,t,i){var n=e+"="+escape(t);if(0<i){var o=new Date;o.setTime(o.getTime()+3600*i*1e3),n=n+"; expires="+o.toGMTString()}document.cookie=n},getCookie:function(e){for(var t=document.cookie.split("; "),i=0;i<t.length;i++){var n=t[i].split("=");if(e===n[0])return n[1]?unescape(n[1]):null}return null},reFresh:function(){window.location=window.location.href},stopPropagation:function(e){var t=e||window.event;t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}};function DSXDialog(e){var n=$.extend({title:"标题",yesBtnText:"确定",noBtnText:"取消",content:"在这里输入内容",fixed:!0,dragable:!0,hideHeader:!1,hideFooter:!1},e);n.content=n.content?n.content:n.html,n.iframe&&(n.content='<iframe scrolling="no" frameborder="0" style="width: 100%; height: 100%;" src="'+n.iframe+'"></iframe>');var a=this,i=window,s=window.document,t=DSXDialog.__count,o=n.hideHeader?"":'<div class="dialog-header"><h4 class="dialog-title">'+n.title+'</h4><a class="close">&times;</a></div>',r=n.hideFooter?"":'<div class="dialog-footer"><button type="button" class="button btn-yes" tabindex="1">'+n.yesBtnText+'</button><button type="button" class="button button-cancel btn-no" tabindex="1">'+n.noBtnText+"</button></div>",c=$('<div class="dialog-body">'+n.content+"</div>"),d=$("<div/>").addClass("dialog");d.append(o),d.append(c),d.append(r),this.id=n.id?n.id:"dsx-modal-"+t,this.zIndex=n.zIndex?n.zIndex:t+1e3,this.dialog=$('<div id="'+this.id+'" class="dsxui-modal"></div>').css({"z-index":this.zIndex+1}).append(d),this.overLayer=$('<div id="dsxui-overlayer-'+t+'" class="dsxui-overlayer"></div>').css({"z-index":this.zIndex}),n.width&&(/^\\d+$/.test(n.width)?c.width(n.width):c.css("width",n.width)),n.height&&(/^\\d+$/.test(n.height)?c.height(n.height):c.css("height",n.height)),this.setPosition=function(){var e=($(i).width()-a.dialog.outerWidth())/2,t=($(i).height()-a.dialog.outerHeight())/2;n.fixed?a.dialog.css({top:t,left:e}):a.dialog.css({top:t+$(s).scrollTop(),left:e+$(s).scrollLeft()})},this.close=function(){a.overLayer.remove(),a.dialog.remove(),n.afterClose&&n.afterClose(a)};(function(){if(a.overLayer.appendTo(s.body).show(),a.dialog.appendTo(s.body).show(),a.setPosition(),n.dragable){var o={x:0,y:0};function i(e){var t=window.event||e,i=parseInt(a.dialog.css("top"))+(t.clientY-o.y),n=parseInt(a.dialog.css("left"))+(t.clientX-o.x);a.dialog.css({top:i,left:n}),o.x=t.clientX,o.y=t.clientY}a.dialog.find(".dialog-header").mousedown(function(e){var t=window.event||e;o.x=t.clientX,o.y=t.clientY,$(s).bind("mousemove",i),$(this).css("cursor","move")}),$(s).on("mouseup",function(e){$(s).off("mousemove",i),a.dialog.find(".dialog-header").css("cursor","default")})}a.dialog.find(".close").on("click",a.close),a.dialog.find(".btn-yes").on("click",function(e){n.onConfirm&&n.onConfirm(a)}),a.dialog.find(".btn-no").on("click",function(e){n.onCancel&&n.onCancel(a),a.close()}),n.afterShow&&n.afterShow(a)}).call(this),DSXDialog.__count++}DSXDialog.__count=1;var DSXUI={message:function(e){var t,i=$.extend({type:"success",text:"操作完成"},e);switch("success"!==i.type&&"error"!==i.type&&"warning"!==i.type&&(i.type="infomation"),i.type){case"success":t="&#xe656;";break;case"error":t="&#xe658;";break;case"warning":t="&#xe662;";break;default:t="&#xe6e4;"}$("#dsxui-message-box").remove();var n=$("<div/>").addClass("dsxui-message-box").attr("id","dsxui-message-box"),o=$("<div/>").addClass("message-div message-"+i.type).html('<div class="iconfont message-icon">'+t+'</div><div class="message-text">'+i.text+"</div>");n.html(o).appendTo(document.body).fadeIn("fast").center(),i.afterShow&&i.afterShow(n),setTimeout(function(){n.remove(),i.afterClose&&i.afterClose(n)},2e3)},success:function(e,t){DSXUI.message({type:"success",text:e,afterClose:t})},error:function(e,t){DSXUI.message({type:"error",text:e,afterClose:t})},warning:function(e,t){DSXUI.message({type:"warning",text:e,afterClose:t})},infomation:function(e,t){DSXUI.message({type:"infomation",text:e,afterClose:t})},confirm:function(e,t,i,n){$(e).confirm({text:t,onConfirm:i,onCancel:n})},loading:{isShow:!1},showloading:function(e){e=e||"数据加载中...";var t=DSXUI.loading;return t.overlayer=$("<div/>").addClass("dsxui-overlayer").appendTo(document.body),t.indicator=$('<div class="dsxui-loading-box" id="dsxui-loading-box"><span class="ico"></span>'+e+"</div>").appendTo(document.body).center(),t.isShow=!0,t.close=function(){t.isShow=!1,t.indicator.remove(),t.overlayer.remove()},t.hide=function(){t.close()},t},hideloading:function(){DSXUI.loading.isShow&&DSXUI.loading.close()},spinner:{isShow:!1,hide:null},showSpinner:function(){var e=DSXUI.spinner;return e.overlayer=$("<div/>").addClass("dsxui-overlayer").appendTo(document.body),e.indicator=$('<div class="dsxui-spinner" id="dsxui-spinner"></div>').appendTo(document.body).center(),e.isShow=!0,e.close=function(){e.isShow=!1,e.indicator.remove(),e.overlayer.remove()},e.hide=function(){e.close()},e},hideSpinner:function(){DSXUI.spinner.isShow&&DSXUI.spinner.hide()},toast:{isShow:!1,hide:null},showToast:function(e,t,i){t||(t=1500);var n=DSXUI.toast;n.isShow&&n.hide(),n.container=$("<div/>").addClass("dsxui-toast").attr("id","dsxui-toast").append('<div class="dsxui-toast-content">'+e+"</div>").appendTo(document.body).center(),n.isShow=!0,n.hide=function(){n.isShow=!1,n.container.remove(),i&&i()},setTimeout(n.hide,t)},hideToast:function(){DSXUI.toast.isShow&&DSXUI.toast.hide()},dialog:function(e){return new DSXDialog(e)},showConfirm:function(e,t,i,n){e||(e="删除确认"),t||(t="确认要删除此项目吗?"),DSXUI.dialog({width:350,dragable:!1,title:e,content:'<div style="font-size: 14px;">'+t+"</div>",onConfirm:function(e){e.close(),i&&i(e)},onCancel:function(e){n&&n(e)}})},showImagePicker:function(i){DSXUI.dialog({width:"780px",height:"520px",title:"图片空间",hideFooter:!0,iframe:"/plugin/image",afterShow:function(t){window.onPickedImage=function(e){t.close(),i&&i(e)}},afterClose:function(){window.onPickedImage=null}})}};function DistrictSelector(e){var s=$.extend({province:"",city:"",district:"",province_selector:"#province",city_selector:"#city",district_selector:"#district",valueType:"name"},e),i=function(t,e,a,i){e||(e=0),a||(a=0),$.ajax({url:"/api/district/batchget?fid="+e,dataType:"json",success:function(e){if(e.errcode)console.log(e);else{var o='<option value="">请选择</option>';$(e).each(function(e,t){var i,n;"id"===s.valueType?(i=t.id,n=a==t.id?' selected="selected"':""):(i=t.name,n=a==t.name?' selected="selected"':""),o+='<option value="'+i+'" idvalue='+t.id+n+">"+t.name+"</option>"}),$(t).html(o),i&&i()}}})};0<$(s.province_selector).length&&i(s.province_selector,0,s.province,function(){0<$(s.city_selector).length&&$(s.province_selector).on("change",function(e){var t=$(this).find("option:selected").attr("idvalue");0<t?i(s.city_selector,t,s.city,function(){0<$(s.district_selector).length&&$(s.city_selector).on("change",function(e){var t=$(this).find("option:selected").attr("idvalue");0<t?i(s.district_selector,t,s.county):$(s.district_selector).html('<option value="">请选择</option>')}).change()}):($(s.city_selector).html('<option value="">请选择</option>'),$(s.district_selector).html('<option value="">请选择</option>'))}).change()})}$(function(){$("[data-action=checkall]").on("click",function(){var e=$(this).attr("data-target");void 0===e&&(e="input.checkmark"),$(e).prop("checked",$(this).is(":checked"))}),$(".lazyload").lazyload({effect:"fadeIn",placeholder:"/images/common/placeholder.png"}),$(".asyncload").each(function(){var e=this,t=$(this).attr("data-original");"img"===this.tagName.toLowerCase()?($(this).attr("src","/images/common/placeholder.png"),$("<img/>").attr("src",t).load(function(){$(e).attr("src",t)})):$("<img/>").attr("src",t).load(function(){$(e).css("background-image","url("+t+")")})}),$(".sortable").sortable(),$("[data-toggle=modalbox]").on("click",function(){var e=$(this).attr("data-target");if(e){var t=$("<div/>").addClass("dsxui-modal-bg").appendTo(document.body).show();$(e).show().dragable({hanler:".dialog-title"}),$(e).find("[data-dismiss=modalbox]").on("click",function(){$(e).hide(),t.remove()})}}),$("[data-action=refresh]").on("click",function(){DSXUtil.reFresh()}),$(".checkall").on("click",function(e){var t=$(this).attr("toggle-target");void 0===t&&(t="input.checkmark"),$(t).prop("checked",$(this).is(":checked"))})});