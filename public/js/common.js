/*! common.js created_at:2018-04-08 */

!function(d){d.fn.extend({center:function(n){return n=d.extend({fixed:!0},n),this.each(function(){var e=(d(window).height()-d(this).outerHeight())/2,t=(d(window).width()-d(this).outerWidth())/2;n.fixed?d(this).css({position:"fixed",margin:0,top:e,left:t}):d(this).css({position:"absolute",margin:0,top:e+d(document).scrollTop(),left:t+d(document).scrollLeft()})})},dragable:function(e){e=d.extend({},e);var a=this,s={x:0,y:0};d(this).css({position:"absolute"}),this.moveDiv=function(e){var t=window.event||e,n=d(a).offset(),o=n.top+(t.clientY-s.y),i=n.left+(t.clientX-s.x);d(a).css({top:o,left:i}),s.x=t.clientX,s.y=t.clientY};var n=e.handle?d(e.handle):d(this);n.mousedown(function(e){var t=window.event||e;s.x=t.clientX,s.y=t.clientY,d(document).bind("mousemove",a.moveDiv),n.css({cursor:"move"})}),d(document).mouseup(function(){d(document).unbind("mousemove",a.moveDiv),n.css({cursor:"default"})})},insertContent:function(e,t){var n=d(this)[0];if(document.selection){this.focus();var o=document.selection.createRange();o.text=e,o.moveStart("character",-a);var i=o.text.length;if(2==arguments.length){var a=n.value.length;o.moveEnd("character",i+t),t<=0?o.moveStart("character",i-2*t-e.length):o.moveStart("character",i-t-e.length),o.select()}}else if(n.selectionStart||"0"==n.selectionStart){var s=n.selectionStart,r=n.selectionEnd,c=n.scrollTop;n.value=n.value.substring(0,s)+e+n.value.substring(r,n.value.length),this.focus(),n.selectionStart=s+e.length,n.selectionEnd=s+e.length,n.scrollTop=c,2==arguments.length&&(n.setSelectionRange(s-t,n.selectionEnd+t),this.focus())}else this.value+=e,this.focus()}})}(jQuery),function(s){s.fn.extend({confirm:function(e){var i=s.extend({event:"click",text:"确定要删除吗?",btnYes:"确定",btnNo:"取消"},e),a=s('<div id="dsxui-confirm-box" class="dsxui-confirm-box"><dl><dt class="txt">'+i.text+'</dt><dd><span class="btn btn-yes" tabindex="1">'+i.btnYes+'</span><span class="btn btn-no" tabindex="1">'+i.btnNo+"</span></dd></dl></div>");s(this).on(i.event,function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0;var t=this,n=s(this).offset(),o=parseInt(n.top+s(this).outerHeight())+7;s(document.body).append(a),a.css({top:o+"px",display:"none",position:"absolute"}).fadeIn("fast"),n.left>s(document).width()/2?a.css({right:s(document).width()-(n.left+s(this).outerWidth())+"px"}):a.css({left:n.left+"px"}),a.find(".btn-yes").one("click",function(){a.remove(),i.onConfirm&&i.onConfirm(a,t)}),a.find(".btn-no").click(function(){a.remove(),i.onCancel&&i.onCancel(a,t)}),a.click(function(e){var t=window.event||e;t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}),s(document).on("click",function(){a.remove()})})}})}(jQuery),function(g){g.fn.marquee=function(n){n=g.extend({speed:30,step:1,direction:"left",pause:0,container:"ul",items:"li"},n||{});var e,t=g.inArray(n.direction,["right","down"]);-1<t&&(n.direction=["left","up"][t],n.step=-n.step);var o=g(this),i=o.innerWidth(),a=o.innerHeight(),s=o.find(n.container),r=s.find(n.items),c=r.size(),d=r.width(),l=r.height(),u=d*c,h=l*c;function f(){if("left"===n.direction){var e=o.scrollLeft();n.step<0?o.scrollLeft((e<=0?u:e)+n.step):o.scrollLeft((u<=e?0:e)+n.step),e%d==0&&p()}else{var t=o.scrollTop();n.step<0?o.scrollTop((t<=0?h:t)+n.step):o.scrollTop((h<=t?0:t)+n.step),t%l==0&&p()}}function p(){if(0<n.pause){var e=n.step;n.step=0,setTimeout(function(){n.step=e},n.pause)}}o.height(l),("left"===n.direction&&i<u||"up"===n.direction&&a<h)&&("left"===n.direction?(s.width(2*c*d),n.step<0&&o.scrollLeft(u)):(s.height(2*c*l),n.step<0&&o.scrollTop(h)),s.append(r.clone()),e=setInterval(f,n.speed),o.hover(function(){clearInterval(e)},function(){e=setInterval(f,n.speed)}))}}(jQuery);var DSXValidate={IsURL:function(e){return/^http:\/\/[A-Za-z0-9]+\.[A-Za-z0-9]+[\/=\?%\-&_~`@[\]\:+!]*([^<>])*$/.test(e)},IsChineseName:function(e){return/^[\u4e00-\u9fa5]{2,12}$/.test(e)},IsUserName:function(e){return/^[a-zA-Z0-9_\u4e00-\u9fa5]{2,20}$/.test(e)},IsEmail:function(e){return/^[-._A-Za-z0-9]+@([A-Za-z0-9]+\.)+[A-Za-z]{2,3}$/.test(e)},IsMobile:function(e){return/^1[3|4|5|7|8]\d{9}$/.test(e)},IsPassword:function(e){return/^.{6,20}$/.test(e)},IsIdCardNo:function(e){var o=[7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2,1],i=[1,0,10,9,8,7,6,5,4,3,2];if(this.isTrueValidateCodeBy18IdCard=function(e){var t=0;"x"===e[17].toLowerCase()&&(e[17]=10);for(var n=0;n<17;n++)t+=o[n]*e[n];return valCodePosition=t%11,e[17]==i[valCodePosition]},this.isValidityBrithBy18IdCard=function(e){var t=e.substring(6,10),n=e.substring(10,12),o=e.substring(12,14),i=new Date(t,parseFloat(n)-1,parseFloat(o));return i.getFullYear()==parseFloat(t)&&i.getMonth()==parseFloat(n)-1&&i.getDate()==parseFloat(o)},this.isValidityBrithBy15IdCard=function(e){var t=e.substring(6,8),n=e.substring(8,10),o=e.substring(10,12),i=new Date(t,parseFloat(n)-1,parseFloat(o));return i.getYear()==parseFloat(t)&&i.getMonth()==parseFloat(n)-1&&i.getDate()==parseFloat(o)},15===(e=(e=e.replace(/ /g,"")).replace(/(^\s*)|(\s*$)/g,"")).length)return this.isValidityBrithBy15IdCard(e);if(18==e.length){var t=e.split("");return!(!this.isValidityBrithBy18IdCard(e)||!this.isTrueValidateCodeBy18IdCard(t))}return!1}},DSXUtil={mb_cutstr:function(e,t,n){var o=0,i="";t-=(n=n?"":"...").length;for(var a=0;a<e.length;a++){if(t<(o+=e.charCodeAt(a)<0||255<e.charCodeAt(a)?"utf-8"===charset?3:2:1)){i+=n;break}i+=e.substr(a,1)}return i},paramToJSON:function(e){if(e){var o={},t=e.split("&");return $.each(t,function(e,t){var n=t.split("=");o[n[0]]=n[1]?n[1]:""}),o}},randomString:function(e){e=e||32;var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=t.length,o="";for(i=0;i<e;i++)o+=t.charAt(Math.floor(Math.random()*n));return o},getQueryString:function(e){var t=location.search.match(new RegExp("[?&]"+e+"=([^&]*)(&?)","i"));return t?t[1]:t},changeURLArg:function(url,arg,arg_val){var pattern=arg+"=([^&]*)",replaceText=arg+"="+arg_val;if(url.match(pattern)){var tmp="/("+arg+"=)([^&]*)/gi";return tmp=url.replace(eval(tmp),replaceText),tmp}return url.match("[?]")?url+"&"+replaceText:url+"?"+replaceText},setCookie:function(e,t,n){var o=e+"="+escape(t);if(0<n){var i=new Date;i.setTime(i.getTime()+3600*n*1e3),o=o+"; expires="+i.toGMTString()}document.cookie=o},getCookie:function(e){for(var t=document.cookie.split("; "),n=0;n<t.length;n++){var o=t[n].split("=");if(e===o[0])return o[1]?unescape(o[1]):null}return null},reFresh:function(){window.location=window.location.href},stopPropagation:function(e){var t=e||window.event;t.stopPropagation?t.stopPropagation():t.cancelBubble=!0}};function DSXDialog(e){var o=$.extend({title:"标题",yesBtnText:"确定",noBtnText:"取消",content:"在这里输入内容",fixed:!0,dragable:!0,hideHeader:!1,hideFooter:!1},e);o.content=o.content?o.content:o.html,o.iframe&&(o.content='<iframe scrolling="no" frameborder="0" style="width: 100%; height: 100%;" src="'+o.iframe+'"></iframe>');var a=this,n=window,s=window.document,t=DSXDialog.__count,i=o.hideHeader?"":'<div class="dialog-header"><h4 class="dialog-title">'+o.title+'</h4><a class="close">&times;</a></div>',r=o.hideFooter?"":'<div class="dialog-footer"><button type="button" class="button btn-yes" tabindex="1">'+o.yesBtnText+'</button><button type="button" class="button button-cancel btn-no" tabindex="1">'+o.noBtnText+"</button></div>",c=$('<div class="dialog-body">'+o.content+"</div>"),d=$("<div/>").addClass("dialog");d.append(i),d.append(c),d.append(r),this.id=o.id?o.id:"dsx-modal-"+t,this.zIndex=o.zIndex?o.zIndex:t+1e3,this.dialog=$('<div id="'+this.id+'" class="dsxui-modal"></div>').css({"z-index":this.zIndex+1}).append(d),this.overLayer=$('<div id="dsxui-overlayer-'+t+'" class="dsxui-overlayer"></div>').css({"z-index":this.zIndex}),o.width&&(/^\\d+$/.test(o.width)?c.width(o.width):c.css("width",o.width)),o.height&&(/^\\d+$/.test(o.height)?c.height(o.height):c.css("height",o.height)),this.setPosition=function(){var e=($(n).width()-a.dialog.outerWidth())/2,t=($(n).height()-a.dialog.outerHeight())/2;o.fixed?a.dialog.css({top:t,left:e}):a.dialog.css({top:t+$(s).scrollTop(),left:e+$(s).scrollLeft()})},this.close=function(){a.overLayer.remove(),a.dialog.remove(),o.afterClose&&o.afterClose(a)};(function(){if(a.overLayer.appendTo(s.body).show(),a.dialog.appendTo(s.body).show(),a.setPosition(),o.dragable){var i={x:0,y:0};function n(e){var t=window.event||e,n=parseInt(a.dialog.css("top"))+(t.clientY-i.y),o=parseInt(a.dialog.css("left"))+(t.clientX-i.x);a.dialog.css({top:n,left:o}),i.x=t.clientX,i.y=t.clientY}a.dialog.find(".dialog-header").mousedown(function(e){var t=window.event||e;i.x=t.clientX,i.y=t.clientY,$(s).bind("mousemove",n),$(this).css("cursor","move")}),$(s).on("mouseup",function(e){$(s).off("mousemove",n),a.dialog.find(".dialog-header").css("cursor","default")})}a.dialog.find(".close").on("click",a.close),a.dialog.find(".btn-yes").on("click",function(e){o.onConfirm&&o.onConfirm(a)}),a.dialog.find(".btn-no").on("click",function(e){o.onCancel&&o.onCancel(a),a.close()}),o.afterShow&&o.afterShow(a)}).call(this),DSXDialog.__count++}DSXDialog.__count=1;var DSXUI={message:function(e){var t,n=$.extend({type:"success",text:"操作完成"},e);switch("success"!==n.type&&"error"!==n.type&&"warning"!==n.type&&(n.type="infomation"),n.type){case"success":t="&#xe656;";break;case"error":t="&#xe658;";break;case"warning":t="&#xe662;";break;default:t="&#xe6e4;"}$("#dsxui-message-box").remove();var o=$("<div/>").addClass("dsxui-message-box").attr("id","dsxui-message-box"),i=$("<div/>").addClass("message-div message-"+n.type).html('<div class="iconfont message-icon">'+t+'</div><div class="message-text">'+n.text+"</div>");o.html(i).appendTo(document.body).fadeIn("fast").center(),n.afterShow&&n.afterShow(o),setTimeout(function(){o.remove(),n.afterClose&&n.afterClose(o)},2e3)},success:function(e,t){DSXUI.message({type:"success",text:e,afterClose:t})},error:function(e,t){DSXUI.message({type:"error",text:e,afterClose:t})},warning:function(e,t){DSXUI.message({type:"warning",text:e,afterClose:t})},infomation:function(e,t){DSXUI.message({type:"infomation",text:e,afterClose:t})},confirm:function(e,t,n,o){$(e).confirm({text:t,onConfirm:n,onCancel:o})},loading:{isShow:!1},showloading:function(e){e=e||"数据加载中...";var t=DSXUI.loading;return t.overlayer=$("<div/>").addClass("dsxui-overlayer").appendTo(document.body),t.indicator=$('<div class="dsxui-loading-box" id="dsxui-loading-box"><span class="ico"></span>'+e+"</div>").appendTo(document.body).center(),t.isShow=!0,t.close=function(){t.isShow=!1,t.indicator.remove(),t.overlayer.remove()},t.hide=function(){t.close()},t},hideloading:function(){DSXUI.loading.isShow&&DSXUI.loading.close()},spinner:{isShow:!1,hide:null},showSpinner:function(){var e=DSXUI.spinner;return e.overlayer=$("<div/>").addClass("dsxui-overlayer").appendTo(document.body),e.indicator=$('<div class="dsxui-spinner" id="dsxui-spinner"></div>').appendTo(document.body).center(),e.isShow=!0,e.close=function(){e.isShow=!1,e.indicator.remove(),e.overlayer.remove()},e.hide=function(){e.close()},e},hideSpinner:function(){DSXUI.spinner.isShow&&DSXUI.spinner.hide()},toast:{isShow:!1,hide:null},showToast:function(e,t,n){t||(t=1500);var o=DSXUI.toast;o.isShow&&o.hide(),o.container=$("<div/>").addClass("dsxui-toast").attr("id","dsxui-toast").append('<div class="dsxui-toast-content">'+e+"</div>").appendTo(document.body).center(),o.isShow=!0,o.hide=function(){o.isShow=!1,o.container.remove(),n&&n()},setTimeout(o.hide,t)},hideToast:function(){DSXUI.toast.isShow&&DSXUI.toast.hide()},dialog:function(e){return new DSXDialog(e)},showConfirm:function(e,t,n,o){e||(e="删除确认"),t||(t="确认要删除此项目吗?"),DSXUI.dialog({width:350,dragable:!1,title:e,content:'<div style="font-size: 14px;">'+t+"</div>",onConfirm:function(e){e.close(),n&&n(e)},onCancel:function(e){o&&o(e)}})},showImagePicker:function(n){DSXUI.dialog({width:"780px",height:"520px",title:"图片空间",hideFooter:!0,iframe:"/plugin/image",afterShow:function(t){window.onPickedImage=function(e){t.close(),n&&n(e)}},afterClose:function(){window.onPickedImage=null}})}};$(function(){$("[data-action=checkall]").on("click",function(){var e=$(this).attr("data-target");void 0===e&&(e="input.checkmark"),$(e).prop("checked",$(this).is(":checked"))}),$(".lazyload").lazyload({effect:"fadeIn",placeholder:"/images/common/placeholder.png"}),$(".asyncload").each(function(){var e=this,t=$(this).attr("data-original");"img"===this.tagName.toLowerCase()?($(this).attr("src","/images/common/placeholder.png"),$("<img/>").attr("src",t).load(function(){$(e).attr("src",t)})):$("<img/>").attr("src",t).load(function(){$(e).css("background-image","url("+t+")")})}),$(".sortable").sortable(),$("[data-toggle=modalbox]").on("click",function(){var e=$(this).attr("data-target");if(e){var t=$("<div/>").addClass("dsxui-modal-bg").appendTo(document.body).show();$(e).show().dragable({hanler:".dialog-title"}),$(e).find("[data-dismiss=modalbox]").on("click",function(){$(e).hide(),t.remove()})}}),$("[data-action=refresh]").on("click",function(){DSXUtil.reFresh()}),$(".checkall").on("click",function(e){var t=$(this).attr("toggle-target");void 0===t&&(t="input.checkmark"),$(t).prop("checked",$(this).is(":checked"))})});